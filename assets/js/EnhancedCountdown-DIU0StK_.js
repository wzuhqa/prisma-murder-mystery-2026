import{j as t}from"./vendor-animation-0c-I7SRA.js";import{r as a}from"./vendor-react-C6aPC2zO.js";const M=[...Array(12)].map((d,n)=>({id:n,left:(n*8.33+2)%100,delay:n*.45%5,duration:4+n*.3%4,size:n%4===0?"fast":n%3===0?"slow":""})),A=[{type:"fingerprint",icon:"ðŸ‘",style:{"--rotation":"-20deg"}},{type:"magnifier",icon:"ðŸ”",style:{"--rotation":"15deg"}}],b=({targetTime:d="2026-02-28T00:00:00",enableSound:n=!1,onComplete:o})=>{const[i,m]=a.useState({days:0,hours:0,minutes:0,seconds:0}),[w,N]=a.useState(!1),[T,h]=a.useState(!1),[j,f]=a.useState(null),[S,y]=a.useState(null),[k,I]=a.useState(null),[D,p]=a.useState(!1),u=a.useRef(-1),r=a.useRef(null),x=a.useCallback(()=>{try{const e=new Date(d);return isNaN(e.getTime())?new Date("2026-02-28T00:00:00"):e}catch{return new Date("2026-02-28T00:00:00")}},[d]),l=a.useCallback(()=>{const e=x()-new Date;return e<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(e/(1e3*60*60*24)),hours:Math.floor(e/(1e3*60*60)%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}},[x]),g=a.useCallback(()=>{if(!(!n||!r.current))try{const e=r.current,s=e.createOscillator(),c=e.createGain();s.connect(c),c.connect(e.destination),s.frequency.setValueAtTime(800,e.currentTime),s.type="sine",c.gain.setValueAtTime(.01,e.currentTime),c.gain.exponentialRampToValueAtTime(.001,e.currentTime+.1),s.start(e.currentTime),s.stop(e.currentTime+.1)}catch{}},[n]);a.useEffect(()=>{const e=setTimeout(()=>N(!0),100);return()=>clearTimeout(e)},[]),a.useEffect(()=>{if(n)try{r.current=new(window.AudioContext||window.webkitAudioContext)}catch{}return()=>{r.current&&r.current.close()}},[n]),a.useEffect(()=>{const e=l();m(e),e.days*86400+e.hours*3600+e.minutes*60+e.seconds<=0&&(h(!0),o?.())},[l,o]),a.useEffect(()=>{const e=setInterval(()=>{const s=l();m(s);const c=s.days*86400+s.hours*3600+s.minutes*60+s.seconds;if(s.seconds!==u.current&&u.current!==-1){if(g(),f("seconds"),setTimeout(()=>f(null),600),Math.random()>.4){const v=["days","hours","minutes","seconds"];y(v[Math.floor(Math.random()*v.length)]),setTimeout(()=>y(null),150+Math.random()*400)}c<=5&&c>0&&(p(!0),setTimeout(()=>p(!1),600))}u.current=s.seconds,c<=0&&(h(!0),o?.(),clearInterval(e))},1e3);return()=>clearInterval(e)},[l,o,g]);const E=[{label:"DAYS",value:i.days,key:"days"},{label:"HOURS",value:i.hours,key:"hours"},{label:"MINS",value:i.minutes,key:"minutes"},{label:"SECS",value:i.seconds,key:"seconds"}];return T?t.jsx("div",{className:"enhanced-countdown-wrapper",children:t.jsxs("div",{className:"countdown-impact-overlay",children:[t.jsx("div",{className:"impact-flash"}),t.jsx("div",{className:"impact-message",children:"THE MYSTERY BEGINS"})]})}):t.jsxs("div",{className:`enhanced-countdown-wrapper ${D?"shake":""}`,children:[t.jsxs("div",{className:"sr-only",children:[i.days," days, ",i.hours," hours, ",i.minutes," minutes, ",i.seconds," seconds remaining"]}),t.jsx("div",{className:"countdown-fog-container","aria-hidden":"true",style:{willChange:"auto"},children:t.jsx("div",{className:"countdown-fog fog-layer-1"})}),t.jsx("div",{className:"ashes-container","aria-hidden":"true",children:M.map(e=>t.jsx("div",{className:`ash-particle ${e.size}`,style:{left:`${e.left}%`,animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`}},e.id))}),t.jsx("div",{className:"clue-icons-overlay","aria-hidden":"true",children:A.map(e=>t.jsx("span",{className:`clue-icon ${e.type}`,style:e.style,children:e.icon},e.type))}),t.jsxs("div",{className:`countdown-main ${w?"fade-in-wrapper":"opacity-0"}`,children:[t.jsxs("div",{className:"countdown-header-section",children:[t.jsx("h2",{className:"countdown-title scratched-text-heavy",children:"TIME REMAINING"}),t.jsx("p",{className:"countdown-subtitle scratched-text",children:"The investigation awaits..."})]}),t.jsx("div",{className:"countdown-timer-display",children:E.map((e,s)=>t.jsxs("div",{className:"countdown-unit",children:[s>0&&t.jsx("span",{className:"countdown-separator",children:":"}),t.jsxs("div",{className:"digit-box-container",children:[t.jsx("div",{className:"digit-card",children:t.jsx("span",{className:`digit-value ${j===e.key?"slice":""} ${S===e.key?"glitch":""} ${k===e.key?"flicker":""}`,children:String(e.value).padStart(2,"0")})}),t.jsx("span",{className:"digit-label",children:e.label})]})]},e.key))}),t.jsx("div",{className:"countdown-event-date scratched-text",children:"FEBRUARY 28 â€” MARCH 1, 2026"})]})]})};export{b as default};
