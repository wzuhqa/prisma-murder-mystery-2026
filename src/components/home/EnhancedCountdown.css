/* Enhanced Cinematic Countdown Timer - Murder Mystery Theme */
@import url('https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Special+Elite&family=Courier+Prime:wght@700&display=swap');

/* ===== MAIN CONTAINER (V2.6 Noir) ===== */
.enhanced-countdown-wrapper {
  position: relative;
  width: 100%;
  min-height: 500px;
  background-color: var(--bg-base);
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 100px 20px;
  contain: layout style paint;
}

/* Vignette overlay - Cinematic Dark: softer edges */
.enhanced-countdown-wrapper::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 30%, rgba(0, 0, 0, 0.5) 100%);
  pointer-events: none;
  z-index: 5;
}

/* Red ambient lighting from above */
.enhanced-countdown-wrapper::after {
  content: '';
  position: absolute;
  top: -50%;
  left: 50%;
  transform: translateX(-50%);
  width: 150%;
  height: 100%;
  background: radial-gradient(ellipse at top center, rgba(139, 0, 0, 0.2) 0%, transparent 60%);
  pointer-events: none;
  z-index: 1;
}

/* Camera shake animation */
.enhanced-countdown-wrapper.shake {
  animation: cameraShake 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
}

@keyframes cameraShake {

  0%,
  100% {
    transform: translate(0, 0) rotate(0deg);
    filter: blur(0);
  }

  10% {
    transform: translate(-2px, -1px) rotate(-0.2deg);
    filter: blur(0.3px);
  }

  20% {
    transform: translate(2px, 1px) rotate(0.2deg);
    filter: blur(0);
  }

  30% {
    transform: translate(-2px, 1px) rotate(0deg);
    filter: blur(0.3px);
  }

  40% {
    transform: translate(2px, -1px) rotate(0.2deg);
    filter: blur(0);
  }

  50% {
    transform: translate(-1px, 1px) rotate(-0.2deg);
    filter: blur(0.3px);
  }

  60% {
    transform: translate(1px, -1px) rotate(0deg);
    filter: blur(0);
  }

  70% {
    transform: translate(-1px, -1px) rotate(0.2deg);
    filter: blur(0.3px);
  }

  80% {
    transform: translate(1px, 1px) rotate(-0.2deg);
    filter: blur(0);
  }

  90% {
    transform: translate(-1px, 1px) rotate(0deg);
    filter: blur(0.3px);
  }
}

/* ===== FOG/MIST LAYERS ===== */
.countdown-fog-container {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.countdown-fog {
  position: absolute;
  width: 200%;
  height: 200%;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400"><defs><filter id="fogNoise"><feTurbulence type="fractalNoise" baseFrequency="0.01" numOctaves="4" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/><feComponentTransfer><feFuncA type="linear" slope="0.25"/></feComponentTransfer></filter></defs><rect width="800" height="400" filter="url(%23fogNoise)"/></svg>');
  opacity: 0.1;
}

.fog-layer-1 {
  top: -30%;
  left: -60%;
  animation: fogDrift 30s linear infinite;
}

.fog-layer-2 {
  top: -10%;
  left: -40%;
  animation: fogDrift 40s linear infinite reverse;
  opacity: 0.07;
}

.fog-layer-3 {
  top: 10%;
  left: -50%;
  animation: fogDrift 50s linear infinite;
  opacity: 0.05;
}

@keyframes fogDrift {
  0% {
    transform: translateX(0) translateY(0) scale(1);
  }

  25% {
    transform: translateX(10%) translateY(5%) scale(1.05);
  }

  50% {
    transform: translateX(5%) translateY(10%) scale(1.08);
  }

  75% {
    transform: translateX(-5%) translateY(6%) scale(1.03);
  }

  100% {
    transform: translateX(0) translateY(0) scale(1);
  }
}

/* ===== SHADOWY SHAPES ===== */
.countdown-shadows {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.shadow-silhouette {
  position: absolute;
  background: radial-gradient(ellipse at center, transparent 0%, rgba(0, 0, 0, 0.8) 100%);
}

.shadow-1 {
  width: 600px;
  height: 800px;
  left: -200px;
  top: 50%;
  transform: translateY(-50%);
  animation: shadowPulse 10s ease-in-out infinite, shadowDrift 25s ease-in-out infinite;
}

.shadow-2 {
  width: 500px;
  height: 700px;
  right: -150px;
  top: 15%;
  animation: shadowPulse 12s ease-in-out infinite reverse, shadowDrift 30s ease-in-out infinite reverse;
}

.shadow-3 {
  width: 400px;
  height: 500px;
  left: 35%;
  bottom: -150px;
  animation: shadowPulse 15s ease-in-out infinite;
}

@keyframes shadowPulse {

  0%,
  100% {
    opacity: 0.2;
  }

  50% {
    opacity: 0.3;
  }
}

@keyframes shadowDrift {

  0%,
  100% {
    transform: translateY(-50%) translateX(0);
  }

  50% {
    transform: translateY(-50%) translateX(40px);
  }
}

/* ===== DRIFTING ASHES/PARTICLES ===== */
.ashes-container {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.ash-particle {
  position: absolute;
  width: 3px;
  height: 3px;
  background: radial-gradient(circle, rgba(139, 0, 0, 0.9) 0%, rgba(80, 0, 0, 0.5) 50%, transparent 100%);
  border-radius: 50%;
  bottom: -10px;
  animation: ashRise 5s ease-out infinite;
  will-change: transform;
}

.ash-particle.slow {
  width: 2px;
  height: 2px;
  animation-duration: 7s;
}

.ash-particle.fast {
  width: 4px;
  height: 4px;
  animation-duration: 4s;
  background: radial-gradient(circle, rgba(220, 20, 60, 1) 0%, rgba(139, 0, 0, 0.6) 50%, transparent 100%);
}

@keyframes ashRise {
  0% {
    transform: translateY(0) translateX(0) rotate(0deg) scale(1);
    opacity: 0;
  }

  15% {
    opacity: 0.8;
  }

  85% {
    opacity: 0.2;
  }

  100% {
    transform: translateY(-700px) translateX(40px) rotate(720deg) scale(0.3);
    opacity: 0;
  }
}

/* ===== SPARK PARTICLES ===== */
.sparks-container {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.spark {
  position: absolute;
  width: 2px;
  height: 2px;
  background: radial-gradient(circle, rgba(220, 20, 60, 0.8) 0%, rgba(139, 0, 0, 0.4) 60%, transparent 100%);
  border-radius: 50%;
  animation: sparkFloat 3s ease-in-out infinite;
}

@keyframes sparkFloat {

  0%,
  100% {
    opacity: 0;
    transform: translateY(0) scale(0);
  }

  50% {
    opacity: 1;
    transform: translateY(-20px) scale(1);
  }
}

/* ===== LENS FLARES ===== */
.lens-flare {
  position: absolute;
  top: 8%;
  right: 12%;
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(220, 20, 60, 0.06) 0%, rgba(139, 0, 0, 0.04) 40%, transparent 70%);
  border-radius: 50%;
  filter: blur(15px);
  animation: lensFlarePulse 8s ease-in-out infinite;
  pointer-events: none;
}

.lens-flare-2 {
  top: 55%;
  left: 8%;
  width: 120px;
  height: 120px;
  animation: lensFlarePulse 10s ease-in-out infinite reverse;
}

@keyframes lensFlarePulse {

  0%,
  100% {
    opacity: 0.3;
    transform: scale(1) rotate(0deg);
  }

  50% {
    opacity: 0.6;
    transform: scale(1.2) rotate(10deg);
  }
}

/* ===== MURDER CLUE ICONS ===== */
.clue-icons-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.08;
}

.clue-icon {
  position: absolute;
  font-size: clamp(24px, 4vw, 36px);
  filter: blur(0.5px) brightness(0.8);
  animation: clueFloat 12s ease-in-out infinite;
}

.clue-icon.fingerprint {
  top: 12%;
  left: 8%;
  transform: rotate(-20deg);
}

.clue-icon.fingerprint-2 {
  top: 55%;
  right: 10%;
  transform: rotate(25deg);
  animation-delay: -5s;
}

.clue-icon.magnifier {
  top: 25%;
  right: 15%;
  transform: rotate(15deg);
  animation-delay: -3s;
}

.clue-icon.blood {
  bottom: 25%;
  left: 12%;
  transform: rotate(-30deg);
  animation-delay: -7s;
}

.clue-icon.knife {
  bottom: 35%;
  right: 18%;
  transform: rotate(45deg);
  animation-delay: -2s;
}

.clue-icon.skull {
  top: 40%;
  left: 5%;
  transform: rotate(-10deg);
  animation-delay: -9s;
}

@keyframes clueFloat {

  0%,
  100% {
    opacity: 0.06;
    transform: rotate(var(--rotation, 0deg)) translateY(0);
  }

  50% {
    opacity: 0.1;
    transform: rotate(calc(var(--rotation, 0deg) + 5deg)) translateY(-10px);
  }
}

/* ===== MAIN CONTENT ===== */
.countdown-main {
  position: relative;
  z-index: 10;
  text-align: center;
  max-width: 950px;
}

/* Fade in animation */
.fade-in-wrapper {
  animation: fadeInUp 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
    filter: blur(10px);
  }

  60% {
    opacity: 1;
    transform: translateY(-5px) scale(1.02);
    filter: blur(1px);
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

/* Header section */
.countdown-header-section {
  margin-bottom: 50px;
}

.countdown-title {
  font-family: var(--font-creepy);
  font-size: clamp(2rem, 5vw, 3.5rem);
  font-weight: 400;
  /* Creepster */
  letter-spacing: 0.1em;
  color: var(--text-header);
  text-transform: uppercase;
  margin-bottom: 20px;
  text-shadow: 0 4px 15px rgba(0, 0, 0, 0.8);
}

.countdown-divider {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 25px;
}

.countdown-divider-line {
  width: 120px;
  height: 1px;
  background: linear-gradient(90deg, transparent, #dc143c, #dc143c, transparent);
}

.countdown-divider-icon {
  font-size: 18px;
  color: #666;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
}

.countdown-subtitle {
  font-family: var(--font-mono);
  font-size: clamp(10px, 2vw, 14px);
  color: #5a5a5a;
  letter-spacing: 5px;
  margin-top: 18px;
  font-style: italic;
}

/* ===== TIMER DISPLAY ===== */
.countdown-timer-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(10px, 2.5vw, 25px);
  flex-wrap: wrap;
  margin-bottom: 55px;
}

.countdown-unit {
  display: flex;
  align-items: flex-start;
}

/* Separator (Noir Refinement) */
.countdown-separator {
  font-family: var(--font-display);
  font-size: clamp(36px, 7vw, 72px);
  color: var(--color-blood-accent);
  opacity: 0.3;
  margin: 0 clamp(6px, 1.5vw, 18px);
  align-self: flex-start;
  padding-top: 5px;
}

/* Digit box container (Noir Tactile Equipment) */
.digit-box-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 16px;
  background: #111115;
  border: 1px solid #222228;
  box-shadow: 10px 15px 35px rgba(0, 0, 0, 0.8);
}

/* Digit card (Charcoal Paper) */
.digit-card {
  position: relative;
  width: clamp(70px, 14vw, 110px);
  height: clamp(90px, 18vw, 140px);
  background-color: var(--bg-panel);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  box-shadow:
    inset -2px -2px 10px rgba(255, 255, 255, 0.01),
    inset 2px 2px 5px rgba(0, 0, 0, 0.5);
  border: 1px solid #222222;
}

/* Golden edge accent */
.digit-card::before {
  content: '';
  position: absolute;
  inset: 0;
  border: 1px solid rgba(255, 215, 0, 0.15);
  border-radius: 9px;
  pointer-events: none;
}

/* Top blood-red highlight */
.digit-card::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 40%;
  background: linear-gradient(180deg, rgba(139, 0, 0, 0.15) 0%, transparent 100%);
  pointer-events: none;
}

/* Smoky shadow effect */
.digit-glow-smoke {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 35px;
  background: linear-gradient(0deg, rgba(20, 20, 20, 0.8) 0%, transparent 100%);
  pointer-events: none;
}

/* Outer glow */
.digit-glow-outer {
  position: absolute;
  inset: -3px;
  background: linear-gradient(180deg, rgba(220, 20, 60, 0.4) 0%, rgba(139, 0, 0, 0.2) 50%, rgba(220, 20, 60, 0.4) 100%);
  border-radius: 12px;
  filter: blur(6px);
  animation: glowPulse 3s ease-in-out infinite;
  z-index: -1;
}

@keyframes glowPulse {

  0%,
  100% {
    opacity: 0.5;
  }

  50% {
    opacity: 0.85;
  }
}

/* The digit value */
.digit-value {
  font-family: var(--font-mono);
  font-weight: 700;
  font-size: clamp(42px, 10vw, 80px);
  color: var(--text-header);
  text-shadow: 0 4px 10px rgba(0, 0, 0, 0.8);
  letter-spacing: 3px;
  position: relative;
  z-index: 2;
  line-height: 1;
}

/* SLICE/SLASH animation on digit change */
.digit-value.slice {
  animation: sliceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes sliceIn {
  0% {
    opacity: 0;
    transform: translateY(-20px) scale(1.2);
    filter: blur(10px);
  }

  40% {
    opacity: 1;
    transform: translateY(5px) scale(0.95);
    filter: blur(2px);
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

@keyframes sliceIn {
  0% {
    transform: skewX(-25deg) translateX(-30px) scale(0.8);
    opacity: 0;
    filter: blur(15px);
  }

  25% {
    transform: skewX(15deg) translateX(15px) scale(1.1);
    opacity: 0.7;
    filter: blur(5px);
  }

  50% {
    transform: skewX(-8deg) translateX(-8px) scale(1.02);
    opacity: 1;
    filter: blur(2px);
  }

  75% {
    transform: skewX(4deg) translateX(4px) scale(0.99);
    filter: blur(0.5px);
  }

  100% {
    transform: skewX(0) translateX(0) scale(1);
    opacity: 1;
    filter: blur(0);
  }
}

/* GLITCH effect */
.digit-value.glitch {
  animation: glitchEffect 0.35s ease-out;
}

@keyframes glitchEffect {
  0% {
    transform: translate(0);
    filter: hue-rotate(0deg) blur(0);
  }

  20% {
    transform: translate(-3px, 2px);
    filter: hue-rotate(60deg) saturate(1.5) blur(1px);
  }

  40% {
    transform: translate(3px, -2px);
    filter: hue-rotate(-60deg) saturate(1.5) blur(1px);
  }

  60% {
    transform: translate(-2px, -1px);
    filter: hue-rotate(90deg) blur(0.5px);
  }

  80% {
    transform: translate(2px, 1px);
    filter: hue-rotate(-90deg) blur(0.5px);
  }

  100% {
    transform: translate(0);
    filter: hue-rotate(0deg) blur(0);
  }
}

/* Random flicker */
.digit-value.flicker {
  animation: digitFlicker 0.2s ease-out;
}

@keyframes digitFlicker {

  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }

  25% {
    opacity: 0.8;
    transform: scale(0.98);
  }

  50% {
    opacity: 0.9;
    transform: scale(1.02);
  }

  75% {
    opacity: 0.75;
    transform: scale(0.99);
  }
}

/* Digit label */
.digit-label {
  font-family: var(--font-body);
  font-weight: 300;
  font-size: clamp(7px, 1.5vw, 10px);
  color: #8a8a8a;
  letter-spacing: 3px;
  margin-top: 12px;
  text-transform: uppercase;
  text-align: center;
  padding: 4px 8px;
  background: rgba(30, 20, 20, 0.5);
  border-radius: 4px;
  border: 1px solid rgba(139, 0, 0, 0.2);
}

/* ===== EVENT DATE ===== */
.countdown-event-date {
  font-family: var(--font-mono);
  font-size: clamp(11px, 2vw, 15px);
  letter-spacing: 6px;
  color: #4a4a4a;
  text-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
}

/* ===== IMPACT/ZERO STATE ===== */
.countdown-impact-overlay {
  position: absolute;
  inset: 0;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.impact-flash {
  position: absolute;
  inset: 0;
  animation: impactFlashSequence 1.5s ease-out forwards;
}

@keyframes impactFlashSequence {
  0% {
    background: #fff;
  }

  15% {
    background: #dc143c;
  }

  30% {
    background: #8b0000;
  }

  60% {
    background: #1a0505;
  }

  100% {
    background: #000;
  }
}

.impact-blood-splash {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 20% 30%, rgba(139, 0, 0, 1) 0%, transparent 35%),
    radial-gradient(circle at 80% 70%, rgba(139, 0, 0, 0.9) 0%, transparent 30%),
    radial-gradient(circle at 50% 50%, rgba(220, 20, 60, 0.8) 0%, transparent 40%),
    radial-gradient(circle at 10% 80%, rgba(139, 0, 0, 0.7) 0%, transparent 25%),
    radial-gradient(circle at 90% 20%, rgba(139, 0, 0, 0.7) 0%, transparent 25%),
    radial-gradient(circle at 30% 70%, rgba(80, 0, 0, 0.6) 0%, transparent 20%);
  animation: bloodSplashExpand 3s ease-out forwards;
}

@keyframes bloodSplashExpand {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  25% {
    opacity: 1;
  }

  100% {
    transform: scale(1.8);
    opacity: 0.5;
  }
}

.impact-message {
  position: relative;
  z-index: 10;
  font-family: 'Creepster', cursive;
  font-size: clamp(28px, 8vw, 64px);
  color: #dc143c;
  text-shadow:
    0 0 20px rgba(220, 20, 60, 1),
    0 0 40px rgba(220, 20, 60, 0.8),
    0 0 60px rgba(220, 20, 60, 0.5);
  animation: messageReveal 2.5s ease-out forwards;
  animation-delay: 0.6s;
  opacity: 0;
}

@keyframes messageReveal {
  0% {
    opacity: 0;
    transform: scale(0.3);
    filter: blur(30px);
  }

  60% {
    opacity: 1;
    transform: scale(1.1);
    filter: blur(0);
  }

  80% {
    transform: scale(0.95);
  }

  100% {
    opacity: 1;
    transform: scale(1);
    filter: blur(0);
  }
}

/* ===== ACCESSIBILITY ===== */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .enhanced-countdown-wrapper {
    min-height: 550px;
    padding: 60px 15px;
  }

  .countdown-divider-line {
    width: 70px;
  }

  .countdown-timer-display {
    gap: 8px;
  }

  .clue-icon {
    font-size: 20px;
  }
}

@media (max-width: 480px) {
  .enhanced-countdown-wrapper {
    min-height: 500px;
    padding: 50px 10px;
  }

  .countdown-title {
    letter-spacing: 4px;
  }

  .countdown-separator {
    font-size: 28px;
    margin: 0 6px;
  }

  .countdown-divider-line {
    width: 50px;
  }

  .countdown-divider {
    gap: 15px;
  }
}