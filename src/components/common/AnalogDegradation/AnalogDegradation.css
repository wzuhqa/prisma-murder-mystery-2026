/* AnalogDegradation.css - Found Footage & VHS Effects */

.analog-degradation-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 9995;
    overflow: hidden;
    contain: strict;
    will-change: transform;
    transform: translateZ(0);
}

/* Base VHS Noise Layer - Cinematic Dark: subtle 8% */
.vhs-noise {
    position: absolute;
    top: -100px;
    left: -100px;
    right: -100px;
    bottom: -100px;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
    opacity: 0.08;
    pointer-events: none;
    will-change: transform, opacity;
    backface-visibility: hidden;
    animation: vhs-flicker 0.25s infinite alternate;
}

@keyframes vhs-flicker {
    0% {
        transform: translate3d(1px, -1px, 0);
        opacity: 0.06;
    }

    30% {
        transform: translate3d(-1px, 2px, 0);
        opacity: 0.08;
    }

    70% {
        transform: translate3d(2px, 1px, 0);
        opacity: 0.06;
    }

    100% {
        transform: translate3d(-2px, -2px, 0);
        opacity: 0.1;
    }
}

/* Tape Tracking Errors — GPU-composited via transform instead of top */
.tape-tracking {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    box-shadow:
        0 4px 10px rgba(255, 255, 255, 0.05),
        0 -4px 10px rgba(255, 255, 255, 0.05);
    opacity: 0.3;
    will-change: transform, opacity;
    backface-visibility: hidden;
    animation: tape-roll 8s linear infinite;
    mix-blend-mode: overlay;
}

.tape-tracking::before {
    content: '';
    position: absolute;
    top: -20px;
    left: 0;
    width: 100%;
    height: 3px;
    background: rgba(255, 255, 255, 0.12);
}

.tape-tracking::after {
    content: '';
    position: absolute;
    top: 40px;
    left: 0;
    width: 100%;
    height: 1px;
    background: rgba(255, 255, 255, 0.15);
}

@keyframes tape-roll {
    0% {
        transform: translate3d(0, 120vh, 0);
        opacity: 0;
    }

    10% {
        opacity: 0.3;
    }

    50% {
        opacity: 0.4;
    }

    90% {
        opacity: 0.1;
    }

    100% {
        transform: translate3d(0, -20vh, 0);
        opacity: 0;
    }
}

/* Vertical Film Scratches — GPU-composited */
.film-scratch {
    position: absolute;
    left: 20%;
    width: 1px;
    height: 100%;
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 2px rgba(255, 255, 255, 0.05);
    opacity: 0;
    will-change: transform, opacity;
    backface-visibility: hidden;
    animation: scratch-flash 4s linear infinite;
}

.film-scratch.scratch-2 {
    left: 80%;
    width: 2px;
    background: rgba(139, 0, 0, 0.1);
    animation: scratch-flash-2 7s linear infinite 2s;
}

@keyframes scratch-flash {

    0%,
    9%,
    11%,
    100% {
        opacity: 0;
        transform: translate3d(5%, 100%, 0) scaleY(0);
    }

    10% {
        opacity: 0.3;
        transform: translate3d(0, 0, 0) scaleY(1);
    }
}

@keyframes scratch-flash-2 {

    0%,
    2%,
    4%,
    100% {
        opacity: 0;
        transform: translate3d(-5%, 0, 0) scaleY(0);
    }

    3% {
        opacity: 0.2;
        transform: translate3d(0, 10%, 0) scaleY(0.6) skewX(-2deg);
    }
}

/* VCR/Surveillance UI */
.vcr-ui {
    font-family: 'Courier New', Courier, monospace;
    font-size: 24px;
    color: rgba(255, 255, 255, 0.75);
    text-shadow:
        1px 1px 0 rgba(0, 0, 0, 0.8),
        -1px -1px 0 rgba(0, 0, 0, 0.8),
        0 0 10px rgba(255, 255, 255, 0.5);
    letter-spacing: 2px;
}

.vcr-rec,
.vcr-play {
    position: absolute;
    top: 30px;
    left: 40px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: bold;
}

.vcr-play {
    top: 30px;
    left: auto;
    right: 40px;
    opacity: 0.7;
}

.rec-dot {
    width: 14px;
    height: 14px;
    background-color: #ff0000;
    border-radius: 50%;
    box-shadow: 0 0 8px #ff0000;
    animation: rec-blink 1s steps(2, start) infinite;
}

@keyframes rec-blink {
    to {
        visibility: hidden;
    }
}

.vcr-timestamp {
    position: absolute;
    bottom: 30px;
    right: 40px;
    font-weight: normal;
    font-size: 20px;
}

/* Fisheye / Heavy Vignette - Cinematic Dark: visible content */
.fisheye-vignette {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle,
            transparent 55%,
            rgba(0, 0, 0, 0.25) 80%,
            rgba(0, 0, 0, 0.55) 100%);
    box-shadow: inset 0 0 80px rgba(0, 0, 0, 0.5);
    pointer-events: none;
    mix-blend-mode: overlay;
}

/* Global Scratched & Unstable Typography (Optimized) */
.scratched-text {
    position: relative;
    filter: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="scratched"><feTurbulence type="fractalNoise" baseFrequency="0.05" numOctaves="2" result="noise"/><feDisplacementMap in="SourceGraphic" in2="noise" scale="3" xChannelSelector="R" yChannelSelector="G"/></filter></svg>#scratched');
    animation: subtle-shiver 0.08s infinite alternate;
    will-change: transform;
    backface-visibility: hidden;
}

.scratched-text-heavy {
    position: relative;
    filter: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="scratched-heavy"><feTurbulence type="fractalNoise" baseFrequency="0.1" numOctaves="3" result="noise"/><feDisplacementMap in="SourceGraphic" in2="noise" scale="5" xChannelSelector="R" yChannelSelector="G"/></filter></svg>#scratched-heavy');
    animation: nervous-twitch 3s infinite;
    will-change: transform;
    backface-visibility: hidden;
}

@keyframes subtle-shiver {
    0% {
        transform: translate3d(0, 0, 0);
    }

    100% {
        transform: translate3d(0.5px, -0.5px, 0);
    }
}

@keyframes nervous-twitch {

    0%,
    96%,
    98%,
    100% {
        transform: translate3d(0, 0, 0) scale(1) skewX(0);
    }

    97% {
        transform: translate3d(-1px, 1px, 0) scale(0.99) skewX(-2deg);
    }

    99% {
        transform: translate3d(2px, -1px, 0) scale(1.02) skewX(1deg);
    }
}

/* Apply specific trembling to specific letters using pseudo elements if needed, but the subtle-shiver is usually enough */